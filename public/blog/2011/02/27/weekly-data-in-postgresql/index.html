
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Weekly Data in PostgreSQL - Code for Humanity</title>
  <meta name="author" content="Vanessa Hurst">

  
  <meta name="description" content="Don&#8217;t base your week definitions on only part of your data. Create your own. &nbsp;A&nbsp;year = 52 Weeks + 1.25 Days. Clearly not perfect. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://vanessahurst.com/blog/2011/02/27/weekly-data-in-postgresql">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Code for Humanity" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18725212-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Code for Humanity</a></h1>
  
    <h2>Thoughts on coding, data, startups, and life.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:vanessahurst.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Weekly Data in PostgreSQL</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-27T00:00:00-05:00" pubdate data-updated="true">Feb 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>
<div style="color: #000000; font-family: Arial, Helvetica, sans-serif; font-size: 13px; background-color: #ffffff; margin: 8px;">
<p>Don&#8217;t base your week definitions on only part of your data. Create your own. &nbsp;A&nbsp;year = 52 Weeks + 1.25 Days. Clearly not perfect.</p>
<p>Requirements:</p>
<p>-Weeks must be standard period of time (7 days)<br />-Must have access to week start date for set-based comparisons<br />-Must have access to week end date for set-based comparisons<br />-Must be able to order weeks in chronological order<br />-Non-shitty performance</p>
<p>Options:</p>
<p>1) Dynamically generate weeks from base table of data (likely massive tracking table) using to_char(timestamp, &#8216;WW&#8217;) or to_char(timestamp,&#8217;IW&#8217;) to get Week or ISO Week of Year</p>
<p>2) Import ISO Standard table of weeks (source?)</p>
<p>3) Create MyWeeks (or general time periods) table and establish my own</p>
<p>Though option 1 is widely accepted as a shortcut (and, granted, it&#8217;s pretty easy), let&#8217;s look at the potential problems it presents:</p>
<p>-I fail to establish an independent, standard time frame over which to compare different data. All of my weekly data is then limited to the timeframe of the data set recorded in the monster table (e.g. if I based my weeks on a signup_tracking table then compared to events_tracking - I would miss events that happened during periods when no one signed up)</p>
<p>-Perhaps I have a growing web application that doesn&#8217;t have a monster table of events quite yet</p>
<p>-And/Or that that I know it would suck to run a distinct/group by to get the unique weeks from that monster table anyway</p>
<p>Alas, as a righteous database programmer I must import from ISO (2) or create my own (3). Given that ISO means nothing to me and I can&#8217;t seem to find a prepared list of dates, the ISO option becomes writing my own function to record ISO dates (fun:<a href="http://en.wikipedia.org/wiki/Seven-day_week#Week_numbering" target="_blank">http://en.wikipedia.org/wiki/Seven-day_week#Week_numbering</a>).&nbsp;</p>
<p>With options 2 and 3 demanding the same amount of effort, option 3 to create my own week structure seems the best bang for my buck. How to do this quickly in PostgreSQL?</p>
<p>As follows:</p>
<p>-Create table</p>
<p>-Populate first row</p>
<p>-Create function</p>
<p>-Add rows as desired by running function</p>
<p>How have you solved this problem?</p>
</div>
</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Vanessa Hurst</span></span>

      








  


<time datetime="2011-02-27T00:00:00-05:00" pubdate data-updated="true">Feb 27<span>th</span>, 2011</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://vanessahurst.com/blog/2011/02/27/weekly-data-in-postgresql/" data-via="dbness" data-counturl="http://vanessahurst.com/blog/2011/02/27/weekly-data-in-postgresql/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/02/27/founders-at-work/" title="Previous Post: Founders at Work">&laquo; Founders at Work</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/03/16/sxsw-2011-review/" title="Next Post: SXSW 2011 Review">SXSW 2011 Review &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/28/code-org-what-most-schools-don-t-teach/">Code.org: What most schools don't teach</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/04/thinkup-setup-get-better-at-coding-and-social-networking/">ThinkUp Setup: Get better at coding AND social networking</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/04/rails-3-2-6-foundation-3-1-1-setup/">Rails 3.2.6 & Foundation 3.1.1 Setup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/08/scouting-for-open-source-software-with-webfwd/">Scouting for Open Source Software with WebFWD</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/17/getting-started-in-sql-with-heroku-postgres/">Getting Started in SQL with Heroku Postgres</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/dbness">@dbness</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dbness',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Vanessa Hurst -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
